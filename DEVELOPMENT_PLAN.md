# 「GWS Automater for Android」実装計画
プロジェクト名: GWS Automater for Android (コードネーム: My Automation Base)

## 現在の開発状況 (2025-11-11)
- **課題:**
    - Firebase Authentication / Firestore連携部分でgRPC関連の `java.lang.NoClassDefFoundError` が発生し、サインイン処理後にアプリがクラッシュする。
    - 依存関係の調整（`grpc-core`の追加、gRPC関連ライブラリの削除とFirebase BOMへの一本化）を試みたが、問題は解決していない。

- **現在の方針:**
    - クラッシュ問題を一時的に回避するため、`SettingsFragment`内のサインイン処理をコメントアウト済み。
    - 認証機能を一時的に切り離し、ログインが不要な範囲のUI実装と機能開発を優先して進める。

---

## コンセプト
「指先で創造し、育てる、ゲームのようなGWS自動化体験」
プログラミング知識がない個人事業主/零細企業、および早期教育に関心のある若年層向けに、Google Workspaceおよびその他サービスの定型業務を、直感的で楽しいGUI（ゲームライクなUX）で自動化できるAndroidネイティブアプリ。

## フェーズ1: コア機能の実装と「遊び心」の土台作り (MVP)
### 目標
- 基本的なGWS自動化機能の提供。
- 「ゲームのようなUI/UX」の核心部分（ドラッグ＆ドロップ、アニメーション、視覚化）の実現。
- 初期ターゲット層（個人事業主/零細企業）への価値提供。

### 主要機能
- **GWSコアモジュールの実装:**
    - **Gmail:** 受信トリガー、メール送信、添付ファイル保存（Drive）。
    - **Google Drive:** ファイルアップロード/ダウンロード、フォルダ作成。
    - **Google Sheets:** 行追加、セル更新、データ取得。
    - **Google Calendar:** イベント作成、取得。
    - *備考: Androidアプリとして動作する最小限のAPI連携と認証機能を実装。*

- **ワークフロー構築エディター (My Automation Base) の基盤:**
    - 直感的なドラッグ＆ドロップインターフェース: 指先でモジュールを配置し、線で接続できる基本的な機能。
    - 実行状況の視覚化（初期版）: ワークフロー実行時に、モジュール間をデータが流れる様子をシンプルなアニメーション（光の粒、色変化など）で表示。
    - テーマ空間（初期版）: 選択可能な1〜2種類の基本テーマ（例: 「工場」「デジタル空間」）を実装。モジュールの見た目がテーマに合わせて変化する。

- **モジュール選択GUI (マイ・ライブラリ) の基盤:**
    - 「本棚」形式のカテゴリ表示: GWSサービスごとに「本」や「置物」として分類・表示。
    - 「本」を開くモジュール詳細: タップで詳細説明と「ワークフローに追加」ボタンが表示されるUI。
    - モジュールアイコン: 各モジュールを象徴する、レゴブロック風のシンプルで視覚的に魅力的なアイコンを作成。

- **ユーティリティモジュール（初期版）:**
    - **条件分岐 (If/Else):** 基本的な条件判定と分岐ロジック。
    - **待機 (Delay):** 指定時間だけ処理を停止。

- **ユーザー管理と認証:**
    - **Firebase Authentication (Googleアカウント連携):** ユーザーサインイン機能。 **（現在ブロック中）**
    - **GWSサービスへのOAuth認証とトークン管理。**

- **技術スタック:**
    - Android Native (Kotlin, Jetpack Compose)
    - Firebase (Authentication, Crashlytics, Firestore)
    - Google APIs Client Libraries (Gmail, Drive, Sheets, Calendar)
    - Hilt for Dependency Injection

## フェーズ2: 機能拡張と「ゲーム性」の深化
### 目標
- GWS以外の連携の拡大と、より高度なワークフロー構築機能の提供。
- 「ゲームのような体験」の本格的な強化（コレクション、テーマ、教育要素）。
- 若年層ターゲットへのアプローチ開始。

### 主要機能
- **GWSモジュールの高度化:**
    - Gmailでのメール本文解析、特定要素の抽出。
    - DriveでのOCR連携（画像からテキスト抽出）。
    - Sheetsでの高度な検索・フィルタリング・グラフ生成。

- **外部サービス連携モジュール:**
    - Slack / Discord / Teams (通知、メッセージ送信)。
    - Trello / Asana (タスク作成、更新)。
    - Dropbox / OneDrive (ファイル操作)。

- **ワークフロー構築エディターの強化:**
    - ミクロ/マクロ視点切り替え: ズームイン/アウト機能、俯瞰表示。
    - よりリッチな稼働アニメーション: データフローの表現をより多彩に（光の経路、コンベア表現など）。
    - エラー検出とフィードバック: ワークフロー上の問題箇所を視覚的にハイライトし、原因と解決策を提示。
    - テーマ空間の追加: 「子供部屋」「オフィス」などのテーマを複数追加し、モジュールのビジュアルも連動させる。

- **モジュール選択GUI (マイ・ライブラリ) の強化:**
    - コレクション要素の本格実装: 未入手モジュールをシルエットで表示し、コンプリート率メーターなどを追加。
    - モジュールパックの販売システム: アプリ内課金 (In-App Purchases) でモジュールパックやテーマパックを提供。
    - 「学びのヒント」の充実: 各モジュールにおけるプログラミング的思考の解説や、関連スキルへの誘導。
    - 検索・フィルター機能。

- **ユーティリティモジュールの追加:**
    - 繰り返し (Loop/For Each): リスト処理や反復タスク。
    - データ操作: テキスト処理（結合、分割、置換）、数値計算。
    - 変数モジュール: ワークフロー内でのデータ保持と受け渡し。

- **教育・ゲーム要素:**
    - チュートリアルをクエスト形式に。
    - 実績・バッジシステム。

## フェーズ3: さらなる進化とコミュニティ形成
### 目標
- 高度なパーソナライゼーションと共有機能の提供。
- ユーザー間の交流と、アプリエコシステムの活性化。

### 主要機能
- **AIアシスタント機能 (補助):**
    - 自然言語での簡単なモジュール検索や、ワークフローのヒント提供。
- **テンプレート共有機能:**
    - ユーザーが作成したワークフローテンプレートを共有・公開できるストア。
- **より高度なテーマ/モジュール:**
    - ユーザーがテーマやモジュールの一部をカスタマイズできる機能。
- **IoT/スマートデバイス連携の拡大**
- **マルチプラットフォーム展開の検討**

## UI/UXデザインの重点事項
- アニメーションとサウンド
- 直感的なアイコンとビジュアル
- タッチ操作の最適化
- 年齢層に応じたUI調整 (Kids Mode)
